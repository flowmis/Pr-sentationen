
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Volleyball Turnier Losgenerator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2, h3, h4 {
            margin-top: 40px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #aaa;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #ddd;
        }
        .player-list, .team-list, .matches-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #aaa;
            padding: 10px;
            margin-top: 10px;
        }
        .player-item, .team-item, .match-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        .add-player-form input, .add-player-form select, .add-player-form button {
            margin-right: 10px;
            padding: 5px;
            font-size: 14px;
        }
        .section {
            margin-bottom: 40px;
        }
        .button {
            padding: 8px 16px;
            background-color: #28a745;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 14px;
            border-radius: 4px;
            margin-left: 5px;
        }
        .button:hover {
            background-color: #218838;
        }
        .message {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        /* Switch Styling */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            margin-left: 10px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .switch label {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .switch label:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        .switch input:checked + label {
            background-color: #28a745;
        }
        
        .switch input:checked + label:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>

    <h1>Volleyball Turnier Losgenerator</h1>

    <!-- Erwachsene Spieler Verwaltung -->
    <div class="section">
        <h2>Erwachsene Spieler</h2>
        <div id="adultList" class="player-list"></div>
        <h3>Erwachsene Spieler Hinzufügen</h3>
        <form id="addAdultForm" class="add-player-form">
            <input type="text" id="adultName" placeholder="Name" required>
            <select id="adultPosition" required>
                <option value="" disabled selected>Position</option>
                <option value="MB">MB</option>
                <option value="AA">AA</option>
                <option value="Z">Z</option>
            </select>
            <select id="adultLeistung" required>
                <option value="" disabled selected>Leistung</option>
                <option value="1">1 - Sehr gut</option>
                <option value="2">2 - Gut</option>
                <option value="3">3 - Weniger gut</option>
            </select>
            <button type="submit" class="button">Hinzufügen</button>
        </form>
        <div id="adultMessage" class="message"></div>
    </div>

    <!-- Jugendspieler Verwaltung -->
    <div class="section">
        <h2>Jugendspieler</h2>
        <div id="youthList" class="player-list"></div>
        <h3>Jugendspieler Hinzufügen</h3>
        <form id="addYouthForm" class="add-player-form">
            <input type="text" id="youthName" placeholder="Name" required>
            <select id="youthLeistung" required>
                <option value="" disabled selected>Leistung</option>
                <option value="1">1 - Sehr gut</option>
                <option value="2">2 - Gut</option>
                <option value="3">3 - Weniger gut</option>
            </select>
            <button type="submit" class="button">Hinzufügen</button>
        </form>
        <div id="youthMessage" class="message"></div>
    </div>

    <!-- Teams Losen -->
    <div class="section">
        <h2>Teams Losen</h2>
        <button id="drawButton" class="button">Jetzt Losen</button>

        <!-- Abschnitt für nicht zugeteilte Spieler -->
        <div id="unassignedPlayersSection" class="section" style="display:none;">
            <h3>Nicht zugeteilte Spieler</h3>
            <div id="unassignedAdults" class="player-list">
                <h4>Erwachsene</h4>
                <!-- Nicht zugeteilte Erwachsene Spieler werden hier angezeigt -->
            </div>
            <div id="unassignedYouth" class="player-list">
                <h4>Jugendspieler</h4>
                <!-- Nicht zugeteilte Jugendspieler werden hier angezeigt -->
            </div>
        </div>
    </div>

    <!-- Ergebnisse -->
    <div class="section" id="resultsSection" style="display:none;">
        <h2>Ergebnisse</h2>

        <h3>Erwachsenenteams (6er Teams)</h3>
        <div id="adultTeamsList" class="team-list"></div>

        <h3>Gemischte Teams (1 Erwachsener + 2 Jugendspieler)</h3>
        <div id="mixedTeamsList" class="team-list"></div>

        <h3>Paarungen</h3>
        <div id="matchesList" class="team-list">
            <h4>Erwachsenen Matches</h4>
            <div id="adultMatches"></div>
            <h4>Gemischte Matches</h4>
            <div id="mixedMatches"></div>
        </div>

        <h3>Spielergebnisse und Punkte</h3>
        <table id="pointsTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Spiele</th>
                    <th>Punkte</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        // Datenstrukturen zum Speichern der Spieler
        let youthPlayers = [
	    { Name: "Frieda Müller", Leistung: "2", Spiele: 0, Punkte: 0 },
	    { Name: "Julia Einsiedler", Leistung: "2", Spiele: 0, Punkte: 0 },
	    { Name: "Elena Clourido", Leistung: "3", Spiele: 0, Punkte: 0 },
	    { Name: "Noemi Ratgeb", Leistung: "2", Spiele: 0, Punkte: 0 },
	    { Name: "Mirjam Kempen", Leistung: "2", Spiele: 0, Punkte: 0 },
	    { Name: "Jakob Kempen", Leistung: "3", Spiele: 0, Punkte: 0 },
	    { Name: "Bennett Glaubitz", Leistung: "2", Spiele: 0, Punkte: 0 },
	    { Name: "Annelie Müller", Leistung: "3", Spiele: 0, Punkte: 0 },
	    { Name: "Alex Zeberer", Leistung: "2", Spiele: 0, Punkte: 0 },
	    { Name: "Laurenz Jäckel", Leistung: "2", Spiele: 0, Punkte: 0 },
	    { Name: "David Schlageter", Leistung: "1", Spiele: 0, Punkte: 0 },
	    { Name: "Elya Matz", Leistung: "3", Spiele: 0, Punkte: 0 }
        ];

        let adultPlayers = [
	{ Name: "Alex Knoor", Position: "MB", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Ali Krämer", Position: "Z", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Anna Ringle", Position: "AA", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Ben Bohner", Position: "MB", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Caro Stade", Position: "MB", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Daniel Egetemeyer", Position: "AA", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Daria Avram", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Elias Krämer", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Emilia Hauf", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Emily Köhle", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Fabian Diener", Position: "MB", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Felina Schaller", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Felix Krämer", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Felix Leicht", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Felix Lingel", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Florian Bruckmüller", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Hannes Grimm", Position: "MB", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Helene Maneth", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Ida Bohner", Position: "MB", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Jan Knoor", Position: "MB", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Jannis Erlmann", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Jannis Hirschmiller", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Jannis Weidenbacher", Position: "MB", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Janos Schaller", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Joel Dieterle", Position: "AA", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Johanna Schlosser", Position: "MB", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Jonas Gaugler", Position: "AA", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Jonas Lingel", Position: "Z", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Julian Salat", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Katharina Bruch", Position: "AA", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Katja Hahn", Position: "Z", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Lara Kuhn", Position: "MB", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Leah Blatt", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Leah Rommel", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Lenard Schwenk", Position: "Z", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Leni Jäckl", Position: "AA", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Leo Berhalter", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Leonhard Seitz", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Lilli Baumann", Position: "Z", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Lina Maile", Position: "AA", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Linus Wagner", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Lucie Neckermann", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Martin Ungerer", Position: "Z", Leistung: "2", Spiele: 0, Punkte: 0 },
	{ Name: "Max Drexel", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Michi Hirschmiller", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Mieke Kirsch", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Nelly Agathangelidis", Position: "MB", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Nicklas Kuhn", Position: "MB", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Nikita Schütz", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Patrick Syrowatka", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Paul Lindner", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Philipp Knoor", Position: "Z", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Pius Maier", Position: "Z", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Robin Wurst", Position: "Z", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Ronja Baumann", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Rune Drenzcek", Position: "Z", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Sara Tafrali", Position: "Z", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Sebastian Mack", Position: "AA", Leistung: "3", Spiele: 0, Punkte: 0 },
	{ Name: "Steffi Gruber", Position: "Z", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Tom Wenczel", Position: "AA", Leistung: "1", Spiele: 0, Punkte: 0 },
	{ Name: "Vica Mai", Position: "Z", Leistung: "2", Spiele: 0, Punkte: 0 }
        ];

        // DOM Elemente
        const adultListDiv = document.getElementById('adultList');
        const youthListDiv = document.getElementById('youthList');
        const addAdultForm = document.getElementById('addAdultForm');
        const addYouthForm = document.getElementById('addYouthForm');
        const drawButton = document.getElementById('drawButton');
        const resultsSection = document.getElementById('resultsSection');
        const adultTeamsListDiv = document.getElementById('adultTeamsList');
        const mixedTeamsListDiv = document.getElementById('mixedTeamsList');
        const matchesListDiv = document.getElementById('matchesList');
        const adultMatchesDiv = document.getElementById('adultMatches');
        const mixedMatchesDiv = document.getElementById('mixedMatches');
        const pointsTableBody = document.querySelector('#pointsTable tbody');
        const adultMessageDiv = document.getElementById('adultMessage');
        const youthMessageDiv = document.getElementById('youthMessage');

        // Arrays zur Speicherung der Teams
        let adultTeams = [];   // 6er Teams
        let mixedTeams = [];   // 6 gemischte Teams (1 Erwachsener + 2 Jugendspieler)

        // Funktionen zum Rendern der Spielerlisten
        function renderAdultList() {
            adultListDiv.innerHTML = '';
            adultPlayers.forEach((player, index) => {
                const div = document.createElement('div');
                div.className = 'player-item';
                div.innerHTML = `
                    <span>${player.Name} (${player.Position}, Leistung: ${player.Leistung})</span>
                    <button class="button" onclick="deleteAdultPlayer(${index})">Löschen</button>
                `;
                adultListDiv.appendChild(div);
            });
        }

        function renderYouthList() {
            youthListDiv.innerHTML = '';
            youthPlayers.forEach((player, index) => {
                const div = document.createElement('div');
                div.className = 'player-item';
                div.innerHTML = `
                    <span>${player.Name} (Leistung: ${player.Leistung})</span>
                    <button class="button" onclick="deleteYouthPlayer(${index})">Löschen</button>
                `;
                youthListDiv.appendChild(div);
            });
        }

        // Initiales Rendern der Listen beim Laden der Seite
        window.onload = function() {
            renderAdultList();
            renderYouthList();
        }

        // Funktionen zum Löschen von Spielern
        window.deleteAdultPlayer = function(index) {
            if(confirm(`Möchten Sie ${adultPlayers[index].Name} wirklich löschen?`)){
                adultPlayers.splice(index, 1);
                renderAdultList();
                updatePointsTable();
            }
        }

        window.deleteYouthPlayer = function(index) {
            if(confirm(`Möchten Sie ${youthPlayers[index].Name} wirklich löschen?`)){
                youthPlayers.splice(index, 1);
                renderYouthList();
                updatePointsTable();
            }
        }

        // Event Listener für Erwachsene Spieler Hinzufügen
        addAdultForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('adultName').value.trim();
            const position = document.getElementById('adultPosition').value;
            const leistung = document.getElementById('adultLeistung').value;
            if(name && position && leistung){
                adultPlayers.push({ Name: name, Position: position, Leistung: leistung, Spiele: 0, Punkte: 0 });
                renderAdultList();
                addAdultForm.reset();
                adultMessageDiv.textContent = `${name} erfolgreich hinzugefügt.`;
                adultMessageDiv.className = 'message success';
                console.log("Erwachsene Spieler nach Hinzufügen:", adultPlayers);
                updatePointsTable();
            } else {
                adultMessageDiv.textContent = "Bitte füllen Sie alle Felder im Erwachsenen-Formular aus.";
                adultMessageDiv.className = 'message error';
            }
        });

        // Event Listener für Jugendspieler Hinzufügen
        addYouthForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('youthName').value.trim();
            const leistung = document.getElementById('youthLeistung').value;
            if(name && leistung){
                youthPlayers.push({ Name: name, Leistung: leistung, Spiele: 0, Punkte: 0 });
                renderYouthList();
                addYouthForm.reset();
                youthMessageDiv.textContent = `${name} erfolgreich hinzugefügt.`;
                youthMessageDiv.className = 'message success';
                console.log("Jugendspieler nach Hinzufügen:", youthPlayers);
                updatePointsTable();
            } else {
                youthMessageDiv.textContent = "Bitte füllen Sie alle Felder im Jugendspieler-Formular aus.";
                youthMessageDiv.className = 'message error';
            }
        });

        // Funktion zum Zufälligen Mischen eines Arrays
        function shuffle(array) {
            for (let i = array.length -1; i >0; i--){
                const j = Math.floor(Math.random() * (i +1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Funktion zum Losen der Teams
        drawButton.addEventListener('click', function() {
            // Überprüfen der Mindestanzahl von Spielern
            if(adultPlayers.length < 42){
                alert("Es müssen mindestens 42 Erwachsene Teilnehmer vorhanden sein (6 Teams mit je 6 Spielern + 6 Erwachsene für gemischte Teams).");
                return;
            }
            if(youthPlayers.length < 12){
                alert("Es müssen mindestens 12 Jugendspieler vorhanden sein (für 6 gemischte Teams mit je 2 Jugendspielern).");
                return;
            }

            // Shuffle die Spieler
            const shuffledAdults = shuffle([...adultPlayers]);
            const shuffledYouth = shuffle([...youthPlayers]);

            // Erstellen der Erwachsenen 6er Teams (6 Teams mit je 6 Spielern)
            adultTeams = [];
            for(let i=0; i<6; i++){
                adultTeams.push(shuffledAdults.slice(i*6, i*6+6));
            }

            // Erstellen der gemischten Teams (6 Teams mit je 1 Erwachsener + 2 Jugendspielern)
            mixedTeams = [];
            for(let i=0; i<6; i++){
                const adult = shuffledAdults[36 + i]; // Erwachsene ab Index 36 für gemischte Teams
                const youth1 = shuffledYouth[i*2];
                const youth2 = shuffledYouth[i*2 +1];
                mixedTeams.push([adult, youth1, youth2]);
            }

            // Anzeigen der Ergebnisse
            displayResults(adultTeams, mixedTeams);
            console.log("Erwachsene 6er Teams:", adultTeams);
            console.log("Gemischte Teams:", mixedTeams);

            // Ermitteln der nicht zugeteilten Erwachsenen Spieler (ab Index 42)
            const unassignedAdults = shuffledAdults.slice(42);

            // Ermitteln der nicht zugeteilten Jugendspieler (ab Index 12)
            const unassignedYouth = shuffledYouth.slice(12);

            // Referenzen zu den HTML-Elementen für unzugewiesene Spieler
            const unassignedAdultsDiv = document.getElementById('unassignedAdults');
            const unassignedYouthDiv = document.getElementById('unassignedYouth');
            const unassignedPlayersSection = document.getElementById('unassignedPlayersSection');

            // Rendern der nicht zugeteilten Erwachsenen Spieler
            unassignedAdultsDiv.innerHTML = '';
            if(unassignedAdults.length > 0){
                unassignedAdults.forEach(player => {
                    const div = document.createElement('div');
                    div.className = 'player-item';
                    div.textContent = player.Name;
                    unassignedAdultsDiv.appendChild(div);
                });
            } else{
                unassignedAdultsDiv.innerHTML = '<p>Keine nicht zugeteilten Erwachsenen Spieler.</p>';
            }

            // Rendern der nicht zugeteilten Jugendspieler
            unassignedYouthDiv.innerHTML = '';
            if(unassignedYouth.length > 0){
                unassignedYouth.forEach(player => {
                    const div = document.createElement('div');
                    div.className = 'player-item';
                    div.textContent = player.Name;
                    unassignedYouthDiv.appendChild(div);
                });
            } else{
                unassignedYouthDiv.innerHTML = '<p>Keine nicht zugeteilten Jugendspieler.</p>';
            }

            // Anzeigen des Abschnitts, wenn es unzugewiesene Spieler gibt
            if(unassignedAdults.length > 0 || unassignedYouth.length > 0){
                unassignedPlayersSection.style.display = 'block';
            } else{
                unassignedPlayersSection.style.display = 'none';
            }

        });

        // Funktion zum Anzeigen der Ergebnisse
        function displayResults(adultTeams, mixedTeams){
            // Ergebnisse Sektion anzeigen
            resultsSection.style.display = 'block';

            // Erwachsene 6er Teams anzeigen
            adultTeamsListDiv.innerHTML = '';
            adultTeams.forEach((team, index) => {
                const div = document.createElement('div');
                div.className = 'team-item';
                const names = team.map(p => `${p.Name}`).join(', ');
                div.innerHTML = `<strong>Erwachsenenteam ${index +1}:</strong> ${names}`;
                adultTeamsListDiv.appendChild(div);
            });

            // Gemischte Teams anzeigen
            mixedTeamsListDiv.innerHTML = '';
            mixedTeams.forEach((team, index) => {
                const div = document.createElement('div');
                div.className = 'team-item';
                const names = team.map(p => `${p.Name}`).join(', ');
                div.innerHTML = `<strong>Gemischtes Team ${index +1}:</strong> ${names}`;
                mixedTeamsListDiv.appendChild(div);
            });

            // Paarungen erstellen
            createMatches(adultTeams, mixedTeams);
        }

        // Funktion zum Erstellen der Paarungen mit Gewinner-Buttons
        function createMatches(adultTeams, mixedTeams){
            // Erwachsenen Matches
            adultMatchesDiv.innerHTML = '';
            for(let i=0; i<adultTeams.length; i+=2){
                if(i+1 < adultTeams.length){
                    const matchDiv = document.createElement('div');
                    matchDiv.className = 'match-item';
                    matchDiv.innerHTML = `
                        <strong>Feld ${Math.floor(i/2)+1}:</strong> Erwachsenenteam ${i+1} gegen Erwachsenenteam ${i+2}
                        <button class="button" data-match-type="adult" data-winning-team="${i}">Gewinner: Team ${i+1}</button>
                        <button class="button" data-match-type="adult" data-winning-team="${i+1}">Gewinner: Team ${i+2}</button>
                    `;
                    adultMatchesDiv.appendChild(matchDiv);
                }
            }

            // Gemischte Matches
            mixedMatchesDiv.innerHTML = '';
            for(let i=0; i<mixedTeams.length; i+=2){
                if(i+1 < mixedTeams.length){
                    const matchDiv = document.createElement('div');
                    matchDiv.className = 'match-item';
                    matchDiv.innerHTML = `
                        <strong>Gemischtes Feld ${Math.floor(i/2)+1}:</strong> Gemischtes Team ${i+1} gegen Gemischtes Team ${i+2}
                        <button class="button" data-match-type="mixed" data-winning-team="${i}">Gewinner: Team ${i+1}</button>
                        <button class="button" data-match-type="mixed" data-winning-team="${i+1}">Gewinner: Team ${i+2}</button>
                    `;
                    mixedMatchesDiv.appendChild(matchDiv);
                }
            }

            // Event Listener für alle Buttons hinzufügen
            const resultButtons = document.querySelectorAll('.match-item .button');
            resultButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const matchType = this.getAttribute('data-match-type');
                    const winningTeamIndex = parseInt(this.getAttribute('data-winning-team'));
                    recordMatchResult(matchType, winningTeamIndex);
                    // Buttons für dieses Match deaktivieren nach der Auswahl
                    this.parentNode.querySelectorAll('.button').forEach(btn => btn.disabled = true);
                });
            });
        }

        // Funktion zur Verarbeitung des Match-Ergebnisses
        function recordMatchResult(matchType, winningTeamIndex) {
            let winningTeam = [];
            let losingTeam = [];

            if(matchType === 'adult'){
                // Gewinnerteam ermitteln
                winningTeam = adultTeams[winningTeamIndex];
                // Verliererteam ermitteln
                const opponentIndex = (winningTeamIndex % 2 === 0) ? winningTeamIndex + 1 : winningTeamIndex - 1;
                losingTeam = adultTeams[opponentIndex];
            } else if(matchType === 'mixed'){
                // Gewinnerteam ermitteln
                winningTeam = mixedTeams[winningTeamIndex];
                // Verliererteam ermitteln
                const opponentIndex = (winningTeamIndex % 2 === 0) ? winningTeamIndex + 1 : winningTeamIndex - 1;
                losingTeam = mixedTeams[opponentIndex];
            } else {
                alert("Unbekannter Match-Typ.");
                return;
            }

            // Punkte zuweisen
            assignPoints(winningTeam, losingTeam);

            // Aktualisieren der Punkte Tabelle
            updatePointsTable();

            // Optional: Benachrichtigung anzeigen
            alert(`${formatTeamName(matchType, winningTeamIndex)} hat gewonnen.`);
        }

        // Funktion zur Formatierung der Team-Namen für die Anzeige
        function formatTeamName(matchType, teamIndex){
            if(matchType === 'adult'){
                return `Erwachsenenteam ${teamIndex +1}`;
            } else if(matchType === 'mixed'){
                return `Gemischtes Team ${teamIndex +1}`;
            }
            return '';
        }

        // Funktion zur Zuweisung von Punkten
        function assignPoints(winningTeam, losingTeam){
            // Punkte und Spiele für Gewinnerteam erhöhen
            winningTeam.forEach(player => {
                const existingPlayer = findPlayerByName(player.Name);
                if(existingPlayer){
                    existingPlayer.Punkte +=1;
                    existingPlayer.Spiele +=1;
                } else {
                    console.error(`Gewinner Spieler "${player.Name}" nicht gefunden.`);
                }
            });

            // Spiele für Verliererteam erhöhen
            losingTeam.forEach(player => {
                const existingPlayer = findPlayerByName(player.Name);
                if(existingPlayer){
                    existingPlayer.Spiele +=1;
                } else {
                    console.error(`Verlierer Spieler "${player.Name}" nicht gefunden.`);
                }
            });
        }

        // Funktion zur Suche eines Spielers anhand des Namens
        function findPlayerByName(name){
            // Suche in Erwachsenen
            let player = adultPlayers.find(p => p.Name === name);
            if(player){
                return player;
            }
            // Suche in Jugendlichen
            player = youthPlayers.find(p => p.Name === name);
            return player;
        }

        // Funktion zur Aktualisierung der Punkte Tabelle
        function updatePointsTable() {
            pointsTableBody.innerHTML = '';

            // Erwachsene Spieler
            adultPlayers.forEach(player => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${player.Name}</td>
                    <td>${player.Spiele}</td>
                    <td>${player.Punkte}</td>
                `;
                pointsTableBody.appendChild(tr);
            });

            // Jugendspieler
            youthPlayers.forEach(player => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${player.Name}</td>
                    <td>${player.Spiele}</td>
                    <td>${player.Punkte}</td>
                `;
                pointsTableBody.appendChild(tr);
            });
        }

    </script>

</body>
</html>
